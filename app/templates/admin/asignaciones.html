{% extends "base.html" %}

{% block contenido %}
<section class="pantalla-movil">
    <h1 class="titulo-rojo centrado">Asignaciones (Administrador)</h1>

    {% if asignaciones %}
        <ul class="lista-pacientes">
            {% for a in asignaciones %}
                <li class="item-paciente">
                    <div>
                        <strong>Paciente:</strong> {{ a.paciente_email }}<br>
                        <strong>MÃ©dico:</strong> {{ a.medico_email }}<br>
                        <strong>Dificultad:</strong> {{ a.dificultad }}<br>
                        <strong>Fecha:</strong> {{ a.fecha_asignacion }}<br>
                        <strong>Estado:</strong> {{ a.estado or "pendiente" }}<br>
                        <strong>Actividades asignadas:</strong>
                        <ul>
                            {% for act in a.actividades_asignadas %}
                                <li>
                                    {% if act.categoria %}<strong>{{ act.categoria }}:</strong>{% endif %}
                                    {% if act.actividad %} {{ act.actividad }}{% else %} Actividad{% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="centrado">No hay asignaciones registradas.</p>
    {% endif %}
</section>
{% endblock %}